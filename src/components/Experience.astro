---
import jobs from "../data/experience.json";
---

<section id="experience">
  <h2>Experiencia</h2>
  <div class="timeline">
    {
      jobs.map((job) => (
        <article class="timeline-item">
          <div class="timeline-marker"></div>
          <div class="timeline-content">
            <div class="job-header">
              <h3>{job.role}</h3>
              <div class="meta">
                <span class="company">{job.company}</span>
                <span class="period">{job.period}</span>
              </div>
            </div>
            <ul class="points">
              {job.points.map(point => (
                <li set:html={point} />
              ))}
            </ul>
          </div>
        </article>
      ))
    }
  </div>

  <style>
    section {
      margin-bottom: 4rem;
    }

    h2 {
      font-size: 2rem;
      margin-bottom: 2.5rem;
      position: relative;
      display: inline-block;
    }
    
    h2::after {
      content: '';
      position: absolute;
      bottom: 5px;
      left: 0;
      width: 100%;
      height: 8px;
      background: var(--color-primary);
      opacity: 0.2;
      z-index: -1;
      transform: skewX(-10deg);
    }

    .timeline {
      position: relative;
      padding-left: 2rem;
      border-left: 2px solid var(--color-border);
    }

    .timeline-item {
      position: relative;
      margin-bottom: 3rem;
    }

    .timeline-item:last-child {
      margin-bottom: 0;
    }

    .timeline-marker {
      position: absolute;
      left: -2.6rem;
      top: 0.5rem;
      width: 1rem;
      height: 1rem;
      border-radius: 50%;
      background: var(--color-background);
      border: 2px solid var(--color-primary);
      z-index: 1;
    }

    .timeline-marker::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background: var(--color-primary);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .timeline-item:hover .timeline-marker::after {
      opacity: 1;
    }

    .job-header {
      margin-bottom: 1rem;
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .meta {
      font-size: 0.95rem;
      color: var(--color-muted);
      font-weight: 500;
    }

    .company {
      color: var(--color-primary);
      font-weight: 600;
    }

    .company::after {
      content: "•";
      margin: 0 0.5rem;
      color: var(--color-border);
    }

    .points {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .points li {
      position: relative;
      padding-left: 1.5rem;
      margin-bottom: 0.75rem;
      color: var(--color-text);
      font-size: 1rem;
    }

    .points li::before {
      content: "▹";
      position: absolute;
      left: 0;
      color: var(--color-primary);
    }
  </style>
</section>